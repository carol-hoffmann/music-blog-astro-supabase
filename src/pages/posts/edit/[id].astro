---
export const prerender = false;
import BaseLayout from "../../../layouts/BaseLayout.astro";

const { id } = Astro.params;
---

<BaseLayout title="Edit Post | Music Blog">
  <section class="page newpost-page">
    <div class="posts-hero-bg" aria-hidden="true">
      <img class="posts-hero-img" src="/images/hero5.jpg" alt="" loading="eager" />
      <div class="posts-hero-overlay"></div>
    </div>

    <header class="page-head">
      <div>
        <h1 class="page-title">Edit Post</h1>
        <p class="page-subtitle">Update your post content.</p>
      </div>

      <a class="btn btn-ghost" href="/posts">Back</a>
    </header>

    <div class="posts-shell">
      <!-- ✅ Passa o id para o JS sem depender de URL parsing -->
      <form id="editForm" class="glass-panel" novalidate data-post-id={id}>
        <label>
          Title
          <input id="title" type="text" name="title" required />
        </label>

        <label>
          Content
          <textarea id="content" name="content" rows="10" required></textarea>
        </label>

        <div class="form-actions">
          <button class="btn" type="submit">Save changes</button>
          <p id="msg" class="form-msg meta"></p>
        </div>
      </form>
    </div>
  </section>

  <!-- ✅ Import via Vite (não dá 404 em /lib/...) -->
 <script type="module">
  import "/src/scripts/editPostPage.ts";
</script>

</BaseLayout>
